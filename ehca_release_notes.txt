
             Open Fabrics Enterprise Distribution (OFED)
                    ehca in OFED 1.3 Release Notes

                           February 2008


Overview
--------
ehca is the low level driver implementation for all IBM GX-based HCAs.

Supported HCAs
--------------
- GX Dual-port SDR 4x IB HCA
- GX Dual-port SDR 12x IB HCA
- GX Dual-port DDR 4x IB HCA
- GX Dual-port DDR 12x IB HCA

Available Parameters
--------------------
In order to set ehca parameters, add the following line(s) to /etc/modprobe.conf:

        options ib_ehca <parameter>=<value>

whereby <parameter> is one of the following items:
- debug_level     debug level (0: no debug traces (default), 1: with debug traces)
- nr_ports        number of connected ports (2: (default), -1: autodetect mdoe)
- port_act_time   time to wait for port activation (default: 30 sec)
- scaling_code    scaling code (0: disable (default), 1: enable)

New Features
------------
- Port connection autodetect mode
- eHCA2 only:
  * Large page MRs
  * Shared receive QPs
  * Low latency QPs
  * 4k MTU

Fixed Bugs ofed-1.3.1
---------------------
- Support all ibv_devinfo values in query_device() and query_port()
- Prevent posting of SQ WQEs if QP not in RTS
- Remove mr_largepage parameter, ie always enable large page support
- Allocate event queue size depending on max number of CQs and QPs
- Protect QP against destroying until all async events for it are handled

Fixed Bugs ofed-1.3
-------------------
- Serialize HCA-related hCalls if necessary
- Fix static rate if path faster than link
- Return physical link information in query_port()
- Fix clipping of device limits to INT_MAX
- Fix issues related to path migration support
- Support more than 4k QPs for userspace and kernelspace
- Prevent sending UD packets to QP0
- Prevent RDMA-related connection failures on some eHCA2 hardware

Available backports
-------------------
- RedHat EL4 up5: 2.6.9-42.ELsmp
- RedHat EL4 up6: 2.6.9-65.ELsmp
- RedHat EL5: 2.6.18-8.ELsmp
- RedHat EL5 up1: 2.6.18-53.ELsmp
- SLES10: 2.6.16.21-0.8-smp
- SLES10SP1: 2.6.16-53-0.16-smp
- SLES10SP2: 2.6.16-60
- kernel.org: 2.6.19-24.x

Known Issues
------------
1. The device driver normally uses both ports. For using just one port it is
strongly recommended to set option nr_ports=-1 to enable autodetect mode:
   modprobe ib_ehca nr_ports=-1

2. Furthermore the port(s) needs to be connected to an active switch port while
loading the ehca device driver.

3. RedHat EL5 2.6.18-8.ELsmp
   User space not supported
